<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title>Initiative for Computational Societal and Security Research</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <style>

.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  top: -5px;
  right: 110%;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 100%;
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent transparent black;
}
.tooltip:hover .tooltiptext {
  visibility: visible;
}

        .grid:after {
            content: '';
            display: block;
            clear: both;
        }

        /* ---- grid-item ---- */

        .grid-sizer {width: 30%;}
        .gutter-sizer { width: 4%; }

        .grid-item {
            height: auto;
            float: left;
            border: 1px dotted rgba(70, 70, 70, 0.267);
            border-color: #000000;
            border-radius: 2px;
            margin-bottom: 20px;
            padding: 5px;
            width: 33%;
            font-size: 12px;
        }
    </style>
</head>
<!-- Preload -->
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <a href="index.html" class="logo"><strong>ICSS</strong> <span>@ William and Mary</span></a>
            <nav>
                <a href="#menu">Menu</a>
            </nav>
        </header>
        <!-- Menu -->
        <nav id="menu">
            <ul class="links">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#one">Research Themes</a></li>
                <li><a href="allprojects.html">Our Projects</a></li>
            </ul>
        </nav>

        <!-- Main -->
        <div id="main" class="alt">

            <!-- One -->
            <section id="one">
                <div class="inner">
                    <header class="major" style="margin-bottom:0px;">
                        <h1 style="line-height:1.25;">All Projects</h1>
                    </header>
                    <p style="margin-top:-10px;margin-bottom:0px;">The ICSS has <span id="projCount">[YYY]</span> projects, with <span id="leadCount">[zzz]</span> student leads, involving <span id="studentCount">[xxx]</span> undergraduate researchers and <span id="gradCount">[mmm]</span> current Ph.D. students.  <span id="gradUnder">[OOO]</span> undergraduate and <span id="gradPhD">[aaa]</span> graduate students have moved on to exciting new careers!</p>
                        
                    <div class="button-group filter-button-group fit small primary" >
                        <button class="button primary small" data-filter="*" style="margin-bottom:10px;">All</button>
                        <button class="button primary small" data-filter=".locationAI" style="margin-bottom:10px;">Location-based AI</button>
                        <button class="button primary small" data-filter=".migrationDisplacement" style="margin-bottom:10px;">Migration & Displacement</button>
                        <button class="button primary small" data-filter=".observationDataCollection" style="margin-bottom:10px;">Observation & Data Collection</button>
                        <button class="button primary small" data-filter=".climateChange" style="margin-bottom:10px;">Climate Change</button>
                        <button class="button primary small" data-filter=".livelihoods" style="margin-bottom:10px;">Livelihoods</button>
                        <button class="button primary small" data-filter=".disruptingHigherEd" style="margin-bottom:10px;">Disrupting Higher Education</button>
                      </div>


                    
                    <span style="font-size:12px;">
                            <span class='fas fa-user'>Team Member | </span>
                            <span class='fas fa-user-tie'>Faculty Member | </span>
                            <span class='fas fa-user-circle'>Team Lead | </span>
                            <span class='fas fa-book-reader'>Graduate Student | </span>
                            <span class='fas fa-user-graduate'>Former Lead (Graduated) | </span>
                            <span class='fas fa-graduation-cap'>Former Member (Graduated) | </span>
                            <span class='fas fa-user-friends'>Former Lead (Changed Roles)</span>
                        </span>
                    <br />
                    <div class="grid">
                        <div class="grid-sizer"></div>
                        <div class="gutter-sizer"></div>


                    </div>


                </div>


            </section>

        </div>



        <!-- Footer -->
        <!-- Footer -->
        <footer id="footer">
            <div class="inner">
                <span style="font-size: 12px;">Want to talk? Find us at a conference, or reach out online!</span>
                <ul class="icons">
                    <li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
                    <li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
                    <li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
                    <li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                    <li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
                </ul>
                <ul class="copyright">
                    <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
                </ul>
            </div>
        </footer>

    </div>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/masonry.pkgd.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>




    <script>

        trackVar = setInterval(loadRoll, 20);
        function loadRoll()
        {
            var rand = Math.floor(10 + Math.random()*89);
            $("#projCount").html(rand);
            $("#leadCount").html(rand);
            $("#studentCount").html(rand);
            $("#gradCount").html(rand);
            $("#gradUnder").html(rand);
            $("#gradPhD").html(rand);  
        }
                
      

        var url = "https://sheets.googleapis.com/v4/spreadsheets/1d3GHKrnSzNDbx2TZC6HjUqYUeAj6bpZsiO7GVaX-SR0/values:batchGet?ranges=Projects&ranges=Teams&key=AIzaSyCIiiCOIg8OXDsAMO9KMpImIoIeZ3LWHTQ"

        $.get(url)
            .then(function (response) {
                studentCounter = 0;
                gradCounter = 0;
                leadCounter = 0;
                projCounter = 0;
                gradPhDMSCounter = 0;
                gradUndergradCounter = 0;
//Count the number of Ph.D. students involved

                $.each(response.valueRanges, function (i, sheet) {

                    if (sheet.range.includes("Team"))
                    {
                        $.each(sheet.values, function(i, row)
                        {
                            if(row[1] == "Graduate GS"){
                                gradPhDMSCounter  = gradPhDMSCounter + 1
                            }
                            if(row[1] == "Graduate"){
                                gradUndergradCounter = gradUndergradCounter + 1
                            }
                            if(row[1] == "Ph.D. Student"){
                                gradCounter = gradCounter + 1
                            }
                        });
                    }


                    if (sheet.range.includes("Projects")) {
                        $.each(sheet.values, function (i, row) {









                            if (i > 0) {
                                projCounter = projCounter + 1;
                                var appStr = "<div class='grid-item "+row[5]+"'><b style='margin-bottom:0px; font-size:20px;'>";

                                //if (row[1].includes('http')) {
                                if (typeof row[1] != 'undefined' && row[1].length > 1) {
                                    appStr = appStr + "<a href='" + row[1] + "'>" + row[0] + "</a></b><br />";
                                }
                                else {
                                    appStr = appStr + row[0] + "</b><br />";
                                }

                                //Team lookup
                                var projIndex = response.valueRanges[1]['values'][0].findIndex(function (element) { 
                                return element == row[0]; 
                                }); 
                               
                                //Team Loop
                                appStr = appStr + "<b>Team: </b>"
                                
                                for (var m = 0; m < response.valueRanges[1]['values'].length; m++){

                                    var iconClass = "fas fa-user"

                                    if(response.valueRanges[1]['values'][m][1] == "Faculty" ){
                                        iconClass = 'fas fa-user-tie';
                                    }

                                    if(response.valueRanges[1]['values'][m][1] == "Ph.D. Student" && (response.valueRanges[1]['values'][m][projIndex] == 1 || response.valueRanges[1]['values'][m][projIndex] == 2)){
                                        iconClass = 'fas fa-book-reader';
                                    }

                                    if(response.valueRanges[1]['values'][m][1] == "Undergraduate" && (response.valueRanges[1]['values'][m][projIndex] == 1 || response.valueRanges[1]['values'][m][projIndex] == 2)){
                                        iconClass = 'fas fa-user';
                                        studentCounter = studentCounter + 1;
                                    }

                                    if(response.valueRanges[1]['values'][m][projIndex] == 1 && response.valueRanges[1]['values'][m][1] != "Faculty" && response.valueRanges[1]['values'][m][1] != "Graduate" && response.valueRanges[1]['values'][m][1] != "Graduate GS"){
                                        iconClass = 'fas fa-user-circle';
                                        leadCounter = leadCounter + 1;
                                    }

                                    if(response.valueRanges[1]['values'][m][projIndex] == 2 && response.valueRanges[1]['values'][m][1] == "Graduate"){
                                        iconClass = 'fas fa-graduation-cap';
                                    }

                                    if(response.valueRanges[1]['values'][m][projIndex] == 1 && response.valueRanges[1]['values'][m][1] != "Faculty" && (response.valueRanges[1]['values'][m][1] == "Graduate" || response.valueRanges[1]['values'][m][1] == "Graduate GS")){
                                        iconClass = 'fas fa-user-graduate';
                                    }


                                    if(response.valueRanges[1]['values'][m][projIndex] == 3){
                                        iconClass = 'fas fa-user-friends';
                                    }

                                    if(response.valueRanges[1]['values'][m][projIndex] == 3 && response.valueRanges[1]['values'][m][1] != "Faculty" && (response.valueRanges[1]['values'][m][1] == "Graduate" || response.valueRanges[1]['values'][m][1] == "Graduate GS")){
                                        iconClass = 'fas fa-user-graduate';
                                    }



                                    if(response.valueRanges[1]['values'][m][projIndex] == 1 || response.valueRanges[1]['values'][m][projIndex] == 2 || response.valueRanges[1]['values'][m][projIndex] == 3){
                                        appStr = appStr + "<span style='border-bottom-style:none;' class='tooltip'><a style='border-bottom-style:none;' href='"+response.valueRanges[1]['values'][m][4]+"' class='"+iconClass+"'>&nbsp;<span style='border-bottom-style:none;' class='tooltiptext'>"+response.valueRanges[1]['values'][m][0]+"</span></a></span>&nbsp;"
                                    }
                                }

                              
                                //br after team
                                appStr = appStr + '<br />';

                                if(typeof row[2] != 'undefined'){
                                    appStr = appStr + row[2];
                                }
                                

                                if (typeof row[1] != 'undefined' && row[1].length > 1) {
                                    appStr = appStr + '<ul class="actions" style="margin-bottom:0px;">';

                                    if (typeof row[3] != 'undefined' && typeof row[4] != 'undefined' && window.innerWidth > 700) {
                                        if(row[4].length > 1){
                                        appStr = appStr + '<li><a href="' + row[4] + '" class="button primary fit small">' + row[3] + '</a></li>';
                                        }
                                    }

                                    if (typeof row[3] != 'undefined' && typeof row[4] != 'undefined' && window.innerWidth < 700) {
                                        if(row[4].length > 1)
                                        {
                                        appStr = appStr + '<li><a href="' + row[4] + '" class="button primary fit small">More</a></li>';
                                        }
                                    }

                                    if(window.innerWidth >= 1000)
                                    {
                                        appStr = appStr + '<li><a href="' + row[1] + '" class="button primary fit small">Learn More</a></li>';

                                    }

                                    
                                    appStr = appStr + '</ul>';


                                }

                                appStr = appStr + "</div>";

                                $(".grid").append(appStr);

                                //Randomize grid order
                                var cards = $(".grid-item");
                                for(var i = 0; i < cards.length; i++){
                                    var target = Math.floor(Math.random() * cards.length -1) + 1;
                                    var target2 = Math.floor(Math.random() * cards.length -1) +1;
                                    cards.eq(target).before(cards.eq(target2));
                                }

    


                            };
                              


                        });

                    }





                });
            })
            .catch(function (error) {
                console.log(error);
            })
            .then(function (response) {
                $('.grid').isotope({
                    itemSelector: '.grid-item',
                    getSortData: {},
                    masonry: {
                    columnWidth: '.grid-sizer',
                    percentPosition: true,
                    gutter: '.gutter-sizer',
                    stagger: 30
                    }
                });





                //Alternate colors in the grid
                var wmColors = ['#00B388', '#E56A54', '#84344E', '#789D4A']

                var cells = document.getElementsByClassName('grid-item');

                for (var i = 0; i < cells.length; i++) {
                    $(cells[i]).css("background", wmColors[Math.floor(Math.random() * Math.floor(4))]); //A class selector would work too
                }
                clearInterval(trackVar);
                $("#projCount").html(projCounter);
                $("#leadCount").html(leadCounter);
                $("#studentCount").html(studentCounter);
                $("#gradCount").html(gradCounter);
                $("#gradUnder").html(gradUndergradCounter);
                $("#gradPhD").html(gradPhDMSCounter);

            });



            $('.filter-button-group').on( 'click', 'button', function() {
  var filterValue = $(this).attr('data-filter');
  $('.grid').isotope({ filter: filterValue });
});

    </script>




</body>

</html>
